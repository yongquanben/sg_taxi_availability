/*! @asymmetrik/sentio-3.0.2 - Copyright Asymmetrik, Ltd. 2007-2017 - All Rights Reserved.*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.sentio=e.sentio||{})}(this,function(e){"use strict";function t(){function e(e){}function t(){var e=v.gChart.selectAll("path.arc").data(h.pie(m),function(e,t){return d.key(e.data,t)}),t=e.enter().append("path").attr("class","arc").on("mouseover",d.mouseover).on("mouseout",d.mouseout).on("click",d.click).each(function(e){this._current={startAngle:0,endAngle:0}}),n=t.merge(e);n.transition().duration(c).attrTween("d",function(e){var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return h.arc(t(e))}}),n.attr("key",function(e,t){return d.key(e.data,t)}).attr("fill",function(e,t){return g.color(d.key(e.data,t))}),e.exit().remove()}function n(){var e=s.markSize+s.markMargin;if("center"===s.position){var t=l.left+u,n=l.top+u,r=null==v.gLegend._maxWidth?0:v.gLegend._maxWidth,i=e*m.length+s.markMargin,a=r/2,o=i/2;return"translate("+(t-a)+","+(n-o)+")"}}function r(){var e=v.gLegend.selectAll("g.entry").data(m,d.key),t=e.enter().append("g").attr("class","entry").attr("transform",function(e,t){return"translate(0, "+t*(s.markSize+s.markMargin)+")"}).on("mouseover",d.mouseover).on("mouseout",d.mouseout).on("click",d.click),r=t.append("rect").attr("width",s.markSize).attr("height",s.markSize),u=t.append("text").attr("x",s.markSize+s.markMargin).attr("y",s.markSize-s.labelOffset);u.merge(e.select("text")).text(d.label),r.merge(e.select("rect")).style("fill",function(e,t){return g.color(d.key(e,t))}),t.merge(e).each(function(e,t){0===t?v.gLegend._maxWidth=this.getBBox().width:v.gLegend._maxWidth=Math.max(this.getBBox().width,v.gLegend._maxWidth)}),v.gLegend.attr("transform",n()),e.exit().remove()}var u,i=400,a=400,l={top:2,bottom:2,right:2,left:2},o=.7,c=500,s={enabled:!0,markSize:16,markMargin:8,labelOffset:2,position:"center",layout:"vertical"},f=d3.dispatch("mouseover","mouseout","click"),d={getEventElement:function(e,t){return null!=e&&null!=e.data?e.data:e},updateActiveElement:function(e,t){var n=v.gLegend.selectAll("g.entry"),r=v.gChart.selectAll("path.arc");if(null!=e){var u=d.key(e,t);n.classed("active",function(e,t){return d.key(e,t)==u}),r.classed("active",function(e,t){return d.key(e.data,t)==u})}else n.classed("active",!1),r.classed("active",!1)},mouseover:function(e,t){e=d.getEventElement(e,t),d.updateActiveElement(e,t),f.call("mouseover",this,e,t)},mouseout:function(e,t){e=d.getEventElement(e,t),d.updateActiveElement(),f.call("mouseout",this,e,t)},click:function(e,t){e=d.getEventElement(e,t),f.call("click",this,e,t)},key:function(e){return e.key},value:function(e){return e.value},label:function(e){return e.key+" ("+e.value+")"}},g={color:d3.scaleOrdinal(d3.schemeCategory10)},h={arc:d3.arc().padAngle(.01),pie:d3.pie().value(function(e,t){return d.value(e,t)}).sort(null)},v={div:void 0,svg:void 0,gChart:void 0,legend:void 0},m=[];return e.init=function(t){return v.div=t.append("div").attr("class","sentio donut"),v.svg=v.div.append("svg"),v.gChart=v.svg.append("g").attr("class","chart"),v.gLegend=v.svg.append("g").attr("class","legend"),e.resize(),e},e.data=function(t){return arguments.length?(m=null!=t?t:[],e):m},e.resize=function(){var t=i-l.right-l.left,r=a-l.top-l.bottom;return u=Math.min(r,t)/2,v.svg.attr("width",i).attr("height",a),v.gChart.attr("transform","translate("+(l.left+u)+","+(l.top+u)+")"),h.arc.innerRadius(u*o).outerRadius(u),v.gLegend.attr("transform",n()),e},e.redraw=function(){return t(),s.enabled&&r(),e},e.width=function(t){return arguments.length?(i=t,e):i},e.height=function(t){return arguments.length?(a=t,e):a},e.innerRadiusRatio=function(t){return arguments.length?(o=t,e):o},e.duration=function(t){return arguments.length?(c=t,e):c},e.key=function(t){return arguments.length?(d.key=t,e):d.key},e.value=function(t){return arguments.length?(d.value=t,e):d.value},e.label=function(t){return arguments.length?(d.label=t,e):d.label},e.colorScale=function(t){return arguments.length?(g.color=t,e):g.color},e.dispatch=function(){return f},e.legend=function(t){return arguments.length?(s=t,e):s},e}function n(e){function t(e){if(null==e||2!==e.length||isNaN(e[0])||isNaN(e[1])||e[0]>=e[1])throw new Error("Default extent must be a two element ordered array of numbers");a.defaultValue=e}function n(e){if(null!=e&&2!==e.length)throw new Error("Extent override must be a two element array or null/undefined");a.overrideValue=e}function r(e){if("function"!=typeof e)throw new Error("Value getter must be a function");l.getValue=e}function u(e){if("function"!=typeof e)throw new Error("Filter must be a function");l.filter=e}function i(e){null!=e&&(null!=e.defaultValue&&t(e.defaultValue),null!=e.overrideValue&&n(e.overrideValue),null!=e.getValue&&r(e.getValue),null!=e.filter&&u(e.filter))}var a={defaultValue:[0,10],overrideValue:void 0},l={getValue:function(e){return e},filter:function(){return!0}};return i.defaultValue=function(e){return arguments.length?(t(e),i):a.defaultValue},i.overrideValue=function(e){return arguments.length?(n(e),i):a.overrideValue},i.getValue=function(e){return arguments.length?(r(e),i):l.getValue},i.filter=function(e){return arguments.length?(u(e),i):l.filter},i.getExtent=function(e){var t,n=a.overrideValue;if(null==n||null==n[0]||null==n[1]){t=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];var r=!1;null!=e&&e.forEach(function(e,n){if(l.filter(e,n)){r=!0;var u=l.getValue(e,n);t[0]=Math.min(t[0],u),t[1]=Math.max(t[1],u)}}),r||(t=a.defaultValue),null!=n&&(null!=n[0]&&(t[0]=n[0],t[0]>t[1]&&(t[1]=t[0])),null!=n[1]&&(t[1]=n[1],t[1]<t[0]&&(t[0]=t[1])))}else t=n;return t},i(e),i}function r(e){function t(e){i=e}function r(e){null!=e&&null!=e.extent&&t(e.extent)}var u={values:function(e){return e.values}},i=n();return r.extent=function(e){return arguments.length?(t(e),r):i},r.values=function(e){return arguments.length?(u.values=e,r):u.values},r.getExtent=function(e){var t;return e.forEach(function(e,n){var r=i.getExtent(u.values(e,n));null==t?t=r:(t[0]=Math.min(t[0],r[0]),t[1]=Math.max(t[1],r[1]))}),null==t&&(t=i.getExtent([])),t},r(e),r}function u(){var e=16,t=1,u={top:20,right:2,bottom:2,left:64},i=500,a=d3.dispatch("cellMouseover","cellMouseout","cellClick","rowMouseover","rowMouseout","rowClick"),l={updateActiveSeries:function(e,t){var n=f.g.chart.selectAll(".row text");if(null!=e){var r=l.seriesKey(e,t);n.classed("active",function(e,t){return l.seriesKey(e,t)==r})}else n.classed("active",!1)},rowMouseover:function(e,t){l.updateActiveSeries(e,t),a.call("rowMouseover",this,e,t)},rowMouseout:function(e,t){l.updateActiveSeries(),a.call("rowMouseout",this,e,t)},rowClick:function(e,t){a.call("rowClick",this,e,t)},cellMouseover:function(e,t){a.call("cellMouseover",this,e,t)},cellMouseout:function(e,t){a.call("cellMouseout",this,e,t)},cellClick:function(e,t){a.call("cellClick",this,e,t)},seriesKey:function(e){return e.key},seriesLabel:function(e){return e.label},seriesValues:function(e){return e.values},key:function(e){return e.key},value:function(e){return e.value}},o={x:n().getValue(function(e,t){return l.key(e,t)}),value:n().getValue(function(e,t){return l.value(e,t)}),multi:r()},c={x:d3.scaleLinear(),y:d3.scaleOrdinal(),color:d3.scaleLinear().range(["#e7e7e7","#008500"])},s={x:d3.axisTop().scale(c.x).tickSizeOuter(0).tickSizeInner(2)},f={div:void 0,svg:void 0,g:{chart:void 0,xAxis:void 0}},d=[],g=function(){};return g.init=function(e){return f.div=e.append("div").attr("class","sentio matrix"),f.svg=f.div.append("svg"),f.g.xAxis=f.svg.append("g").attr("class","x axis"),f.g.chart=f.svg.append("g").attr("class","chart"),g.resize(),g},g.data=function(e){return arguments.length?(d=null!=e?e:[],g):d},g.resize=function(){},g.redraw=function(){var n=d.length,r=[];n>0&&(r=l.seriesValues(d[0]));var a=r.length,h=t+e,v=a*h+t,m=n*h+t;f.svg.attr("width",v+u.left+u.right).attr("height",m+u.top+u.bottom),c.x.domain(o.x.getExtent(r)).range([0,v-t-h]),c.color.domain(o.multi.values(l.seriesValues).extent(o.value).getExtent(d)),f.g.xAxis.attr("transform","translate("+(u.left+t+e/2)+","+u.top+")"),f.g.xAxis.call(s.x);var p=f.g.chart.selectAll("g.row").data(d,l.seriesKey),x=p.enter().append("g");x.style("opacity","0.1").attr("class","row").attr("transform",function(e,t){return"translate("+u.left+","+(u.top+h*t)+")"}).on("mouseover",l.rowMouseover).on("mouseout",l.rowMouseout).on("click",l.rowClick),x.append("text").attr("class","series label").style("text-anchor","end").attr("x",-6).attr("y",t+e/2).attr("dy",".32em"),x.append("line").attr("class","series tick").attr("x1",-3).attr("x2",0).attr("y1",t+e/2).attr("y2",t+e/2);var y=x.merge(p);y.transition().duration(i).style("opacity","1").attr("transform",function(e,t){return"translate("+u.left+","+(u.top+h*t)+")"}),y.select("text.series.label").text(l.seriesLabel),p.exit().transition().duration(i).style("opacity","0.1").remove();var b=y.selectAll("rect.cell").data(l.seriesValues,l.key),w=b.enter().append("rect").attr("class","cell").style("opacity","0.1").style("fill",function(e,t){return c.color(l.value(e,t))}).attr("x",function(e,n){return c.x(l.key(e,n))+t}).attr("y",t).attr("height",e).attr("width",e).on("mouseover",l.cellMouseover).on("mouseout",l.cellMouseout).on("click",l.cellClick),k=w.merge(b);return k.transition().duration(i).style("opacity","1").attr("x",function(e,n){return c.x(l.key(e,n))+t}).style("fill",function(e,t){return c.color(l.value(e,t))}),b.exit().transition().duration(i).attr("width",0).style("opacity","0.1").remove(),g},g.cellSize=function(t){return arguments.length?(e=t,g):e},g.cellMargin=function(e){return arguments.length?(t=e,g):t},g.margin=function(e){return arguments.length?(u=e,g):u},g.duration=function(e){return arguments.length?(i=e,g):i},g.seriesKey=function(e){return arguments.length?(l.seriesKey=e,g):l.seriesKey},g.seriesLabel=function(e){return arguments.length?(l.seriesLabel=e,g):l.seriesLabel},g.seriesValues=function(e){return arguments.length?(l.seriesValues=e,g):l.seriesValues},g.key=function(e){return arguments.length?(l.key=e,g):l.key},g.value=function(e){return arguments.length?(l.value=e,g):l.value},g.colorScale=function(e){return arguments.length?(c.color=e,g):c.color},g.xScale=function(e){return arguments.length?(c.xScale=e,s.x.scale(e),g):c.xScale},g.yScale=function(e){return arguments.length?(c.yScale=e,g):c.yScale},g.xExtent=function(e){return arguments.length?(o.x=e,o.x.getValue(function(t,n){return e(t,n)}),g):o.x},g.valueExtent=function(e){return arguments.length?(o.value=e,o.value.getValue(function(t,n){return e(t,n)}),g):o.value},g.dispatch=function(){return a},g}function i(e){function t(e){g=e}function n(){return g&&null!=c}function r(e){return null!=e&&Array.isArray(e)&&(e=e.map(function(e){return+e})),e}function u(e){return(!Array.isArray(e)||2!=e.length||isNaN(e[0])||isNaN(e[1]))&&(e=void 0),e}function i(e){return function(t){var n=null!=d3.event.selection?r(d3.event.selection.map(s.invert)):void 0,u=d,i=n===u||null!=n&&null!=u&&n[0]===u[0]&&n[1]===u[1],a=!(i&&h);"end"===e&&(d=n,h=!1),a&&f.apply(e,this,t)}}function a(e){var t=void 0;return g&&null!=e&&null!=s&&(t=d3.brushSelection(e),t=null!=t&&Array.isArray(t)?r(t.map(s.invert)):void 0),t}function l(e,t){t=u(t);var n=null==t||t[0]>=t[1];h=!0,n?c.move(e,void 0):c.move(e,t.map(s))}function o(e){if(null==e)throw new Error("Must provide a brush and a scale");if(null==e.brush)throw new Error("Must provide a brush");if(c=e.brush,c.on("brush",i("brush")).on("start",i("start")).on("end",i("end")),null==e.scale)throw new Error("Must provide a scale");s=e.scale,null!=e.enabled&&t(e.enabled)}var c,s,f=d3.dispatch("brush","start","end"),d=void 0,g=!1,h=!1;return o.scale=function(e){return arguments.length?(s=e,o):s},o.dispatch=function(){return f},o.brush=function(){return c},o.enabled=function(e){return arguments.length?(t(e),o):n()},o.getSelection=function(e){return a(e)},o.setSelection=function(e,t){return l(e,t)},o(e),o}function a(){function e(){var e=null!=k.g.brush?k.g.brush.node():null;return A.getSelection(e)}function t(e){A.setSelection(k.g.brush,e)}function u(e){if(null!=e){var n=y.extent(x.x).getExtent(S);if(null!=n&&Array.isArray(n)&&2==n.length){var r=[Math.max(n[0],e[0]),Math.min(n[1],e[1])];t(r)}else t(void 0)}k.g.brush.style("display",A.enabled()?"unset":"none").call(A.brush())}function a(){}function l(){null!=w.x&&k.g.xAxis.call(w.x),null!=w.y&&k.g.yAxis.call(w.y)}function o(){var e=k.g.plots.selectAll(".plot").data(S,h.seriesKey),t=e.enter().append("g").attr("class","plot"),n=t.append("g").append("path").attr("class",function(e){return(e.cssClass?e.cssClass:"")+" line"}),r=t.append("g").append("path").attr("class",function(e){return(e.cssClass?e.cssClass:"")+" area"}),u=e.select(".line"),i=e.select(".area");n.merge(u).datum(h.seriesValues).attr("d",V),r.merge(i).datum(h.seriesValues).attr("d",z.y0(b.y.range()[0]));var a=e.exit();a.remove()}function c(){var e=k.g.markers.selectAll(".marker").data(M.values,m.x),t=e.enter().append("g").attr("class","marker").on("mouseover",function(e,t){E.call("markerMouseover",this,e,t)}).on("mouseout",function(e,t){E.call("markerMouseout",this,e,t)}).on("click",function(e,t){E.call("markerClick",this,e,t)}),n=t.append("line"),r=t.append("text");n.attr("y1",function(e){return b.y.range()[1]}).attr("y2",function(e){return b.y.range()[0]}),r.attr("dy","0em").attr("y",-3).attr("text-anchor","middle").text(m.label);var u=e.select("line"),i=e.select("text");n.merge(u).attr("x1",function(e,t){return b.x(m.x(e,t))}).attr("x2",function(e,t){return b.x(m.x(e))}),r.merge(i).attr("x",function(e,t){return b.x(m.x(e))}),e.exit().remove()}var s="timeline_line_"+Date.now(),f={top:10,right:10,bottom:20,left:40},d=100,g=600,h={valueX:function(e){return e[0]},valueY:function(e){return e[1]},markerValueX:function(e){return e[0]},markerLabel:function(e){return e[1]},seriesKey:function(e){return e.key},seriesValues:function(e){return e.values},seriesLabel:function(e){return e.label}},v={x:function(e){return e[0]},y:function(e){return e[1]}},m={x:function(e,t){return e[0]},label:function(e,t){return e[1]}},p=Date.now(),x={x:n({defaultValue:[p-3e5,p],getValue:function(e,t){return h.valueX(e,t)}}),y:n({getValue:function(e,t){return h.valueY(e,t)}})},y=r().values(function(e,t){return h.seriesValues(e,t)}),b={x:d3.scaleTime(),y:d3.scaleLinear()},w={x:d3.axisBottom().scale(b.x),y:d3.axisLeft().scale(b.y).ticks(3)},k={svg:void 0,g:{container:void 0,plots:void 0,xAxis:void 0,yAxis:void 0,markers:void 0,brush:void 0},plotClipPath:void 0,markerClipPath:void 0},V=d3.line();V.x(function(e,t){return b.x(h.valueX(e,t))}),V.y(function(e,t){return b.y(h.valueY(e,t))});var z=d3.area();z.x(function(e,t){return b.x(h.valueX(e,t))}),z.y1(function(e,t){return b.y(h.valueY(e,t))});var A=i({brush:d3.brushX(),scale:b.x});A.dispatch().on("end",function(){E.call("filterend",this,e())}).on("start",function(){E.call("filterstart",this,e())}).on("brush",function(){E.call("filter",this,e())});var E=d3.dispatch("filter","filterstart","filterend","markerClick","markerMouseover","markerMouseout"),S=[],M={values:[]};return a.init=function(e){return k.div=e.append("div").attr("class","sentio timeline"),k.svg=k.div.append("svg"),k.plotClipPath=k.svg.append("defs").append("clipPath").attr("id","plot_"+s).append("rect"),k.markerClipPath=k.svg.append("defs").append("clipPath").attr("id","marker_"+s).append("rect"),k.g.container=k.svg.append("g"),k.g.plots=k.g.container.append("g").attr("class","plots").attr("clip-path","url(#plot_"+s+")"),k.g.brush=k.g.container.append("g").attr("class","x brush").attr("clip-path","url(#marker_"+s+")"),k.g.markers=k.g.container.append("g").attr("class","markers").attr("clip-path","url(#marker_"+s+")"),k.g.xAxis=k.g.container.append("g").attr("class","x axis"),k.g.yAxis=k.g.container.append("g").attr("class","y axis"),a.resize(),a},a.data=function(e){return arguments.length?(S=null!=e?e:[],a):S},a.markers=function(e){return arguments.length?(M.values=null!=e?e:[],a):M.values},a.resize=function(){var t=e();return b.x.range([0,Math.max(0,g-f.left-f.right)]),b.y.range([Math.max(0,d-f.top-f.bottom),0]),k.plotClipPath.attr("transform","translate(0, -"+f.top+")").attr("width",Math.max(0,g-f.left-f.right)).attr("height",Math.max(0,d-f.bottom)),k.markerClipPath.attr("transform","translate(0, -"+f.top+")").attr("width",Math.max(0,g-f.left-f.right)).attr("height",Math.max(0,d-f.bottom)),k.svg.attr("width",g).attr("height",d),k.g.xAxis.attr("transform","translate(0,"+b.y.range()[0]+")"),k.g.yAxis.attr("class","y axis"),k.g.container.attr("transform","translate("+f.left+","+f.top+")"),k.g.brush.selectAll("rect").attr("y",0).attr("x",0).attr("height",g-f.left-f.right).attr("height",d-f.top-f.bottom+4),A.brush().extent([[0,0],[g-f.left-f.right,d-f.top-f.bottom]]),u(t),a},a.redraw=function(){var t=e();return b.x.domain(y.extent(x.x).getExtent(S)),b.y.domain(y.extent(x.y).getExtent(S)),l(),o(),c(),u(t),a},a.width=function(e){return arguments.length?(g=e,a):g},a.height=function(e){return arguments.length?(d=e,a):d},a.margin=function(e){return arguments.length?(f=e,a):f},a.curve=function(e){return arguments.length?(V.curve(e),z.curve(e),a):V.curve()},a.xAxis=function(e){return arguments.length?(w.x=e,a):w.x},a.yAxis=function(e){return arguments.length?(w.y=e,a):w.y},a.xScale=function(e){return arguments.length?(b.x=e,null!=w.x&&w.x.scale(e),null!=A&&A.scale(e),a):b.x},a.yScale=function(e){return arguments.length?(b.y=e,null!=w.y&&w.y.scale(e),a):b.y},a.xValue=function(e){return arguments.length?(v.x=e,a):v.x},a.yValue=function(e){return arguments.length?(v.y=e,a):v.y},a.yExtent=function(e){return arguments.length?(x.y=e,a):x.y},a.xExtent=function(e){return arguments.length?(x.x=e,a):x.x},a.seriesKey=function(e){return arguments.length?(h.seriesKey=e,a):h.seriesKey},a.seriesLabel=function(e){return arguments.length?(h.seriesLabel=e,a):h.seriesLabel},a.seriesValues=function(e){return arguments.length?(h.seriesValues=e,a):h.seriesValues},a.markerXValue=function(e){return arguments.length?(m.x=e,a):m.x},a.markerLabel=function(e){return arguments.length?(m.label=e,a):m.label},a.dispatch=function(e){return arguments.length?a:E},a.filter=function(e){return arguments.length?(A.enabled(e),a):A.enabled()},a.setFilter=function(e){return t(e),a},a.getFilter=function(){return e()},a}function l(){function e(){r&&(l.redraw(),u=window.setTimeout(e,i>0?1e3/i:0))}var t=0,n=6e4,r=!1,u=null,i=32,l=a();l.yExtent().filter(function(e){var t=l.xValue()(e),n=l.xExtent().getExtent();return t<n[1]&&t>n[0]});var o=l.redraw;return l.redraw=function(){var e=new Date;return l.xExtent().overrideValue([e-t-n,e-t]),o(),l},l.start=function(){if(!r)return r=!0,e(),l},l.stop=function(){return r=!1,null!=u&&window.clearTimeout(u),l},l.restart=function(){return l.stop(),l.start(),l},l.interval=function(e){return arguments.length?(n=e,l):n},l.delay=function(e){return arguments.length?(t=e,l):t},l.fps=function(e){return arguments.length?(i=e,r&&l.restart(),l):i},l}function o(){function e(e){}var t=100,r=24,u=2,i=500,a=d3.dispatch("mouseover","mouseout","click"),l={mouseover:function(e,t){a.call("mouseover",this,e,t)},mouseout:function(e,t){a.call("mouseout",this,e,t)},click:function(e,t){a.call("click",this,e,t)},key:function(e){return e.key},value:function(e){return e.value},label:function(e){return e.key+" ("+e.value+")"}},o={x:d3.scaleLinear(),y:d3.scaleLinear()},c={width:n({defaultValue:[0,10],getValue:function(e,t){return l.value(e,t)}})},s={div:void 0},f=[];return e.init=function(t){return s.div=t.append("div").attr("class","sentio bars-vertical"),e.resize(),e},e.data=function(t){return arguments.length?(f=null!=t?t:[],e):f},e.resize=function(){return o.x.range([0,t]),e},e.redraw=function(){o.x.domain(c.width.getExtent(f)),o.y.domain([0,f.length]),o.y.range([0,(r+u)*f.length]);var t=s.div.selectAll("div.bar").data(f,l.key),n=t.enter().append("div").attr("class","bar").style("top",o.y.range()[1]-r+"px").style("height",r+"px").on("mouseover",l.mouseover).on("mouseout",l.mouseout).on("click",l.click).style("opacity","0.01"),a=n.append("div").attr("class","bar-label");return n.merge(t).transition().duration(i).style("opacity","1").style("width",function(e,t){return o.x(l.value(e,t))+"px"}).style("top",function(e,t){return o.y(t)+"px"}).style("left","0px"),a.merge(t.select("div.bar-label")).html(l.label).style("max-width",o.x.range()[1]-10+"px"),t.exit().transition().duration(i).style("opacity","0.01").style("top",o.y.range()[1]-r+"px").remove(),s.div.style("height",o.y.range()[1]+"px"),e},e.width=function(n){return arguments.length?(t=n,e):t},e.barHeight=function(t){return arguments.length?(r=t,e):r},e.barPadding=function(t){return arguments.length?(u=t,e):u},e.key=function(t){return arguments.length?(l.key=t,e):l.key},e.value=function(t){return arguments.length?(l.value=t,e):l.value},e.label=function(t){return arguments.length?(l.label=t,e):l.label},e.widthExtent=function(t){return arguments.length?(c.width=t,c.width.getValue(function(e,t){return l.value(e,t)}),e):c.width},e.dispatch=function(t){return arguments.length?e:a},e.duration=function(t){return arguments.length?(i=t,e):i},e}function c(e){function t(e){return null==l.size||null==l.lwm?0:Math.floor((e-l.lwm)/l.size)}function n(){l.hwm=l.lwm+l.count*l.size}function r(){for(var e,t=s;c.length>0&&c[0][0]<l.lwm;)e=c.shift(),s-=o.countBin(e);for(;c.length>0&&c[c.length-1][0]>=l.hwm;)e=c.pop(),s-=o.countBin(e);0===c.length&&c.push([l.lwm,o.createSeed()]);for(var n=c[0][0]-l.size;n>=l.lwm;n-=l.size)c.unshift([n,o.createSeed()]);for(;c[c.length-1][0]<l.hwm-l.size;)c.push([c[c.length-1][0]+l.size,o.createSeed()]);o.afterUpdate&&o.afterUpdate.call(a,c,s,t)}function u(e){var n=s;e.forEach(function(e,n){var r=t(o.getKey(e,n));if(r>=0&&r<c.length){var u=o.getValue(e,n),i=o.countBin(c[r]);o.updateBin.call(a,c[r],u,n),s+=o.countBin(c[r])-i}}),o.afterAdd&&o.afterAdd.call(a,c,s,n)}function i(){c.length=0,s=0}function a(e){if(null==e||null==e.size||null==e.count||null==e.lwm)throw new Error("You must provide an initial size, count, and lwm");l.size=Number(e.size),l.count=Number(e.count),l.lwm=Number(e.lwm),null!=e.createSeed&&(o.createSeed=e.createSeed),null!=e.getKey&&(o.getKey=e.getKey),null!=e.getValue&&(o.getValue=e.getValue),null!=e.updateBin&&(o.updateBin=e.updateBin),null!=e.countBin&&(o.countBin=e.countBin),null!=e.afterAdd&&(o.afterAdd=e.afterAdd),null!=e.afterUpdate&&(o.afterUpdate=e.afterUpdate),n(),r()}var l={count:1,size:void 0,lwm:void 0,hwm:void 0},o={createSeed:function(){return[]},getKey:function(e){return e},getValue:function(e){return e},updateBin:function(e,t){e[1].push(t)},countBin:function(e){return"number"==typeof e[1]?e[1]:e[1].hasOwnProperty("length")?e[1].length:0},afterAdd:function(e,t,n){},afterUpdate:function(e,t,n){}},c=[],s=0;return a.set=function(e){return i(),r(),u(e),a},a.clear=function(){return i(),r(),a},a.add=function(e){return u(e),a},a.lwm=function(e){if(!arguments.length)return l.lwm;var t=l.lwm;return l.lwm=Number(e),n(),(t-l.lwm)%l.size!==0&&i(),r(),a},a.hwm=function(){return l.hwm},a.getKey=function(e){return arguments.length?(o.getKey=e,i(),r(),a):o.getKey},a.getValue=function(e){return arguments.length?(o.getValue=e,i(),r(),a):o.getValue},a.updateBin=function(e){return arguments.length?(o.updateBin=e,i(),r(),a):o.updateBin},a.createSeed=function(e){return arguments.length?(o.createSeed=e,i(),r(),a):o.createSeed},a.countBin=function(e){return arguments.length?(o.countBin=e,i(),r(),a):o.countBin},a.afterAdd=function(e){return arguments.length?(o.afterAdd=e,a):o.afterAdd},a.afterUpdate=function(e){return arguments.length?(o.afterUpdate=e,a):o.afterUpdate},a.size=function(e){if(!arguments.length)return l.size;if(e=Number(e),e<1)throw new Error("Bin size must be a positive integer");return e!==l.size&&(l.size=e,n(),i(),r()),a},a.count=function(e){if(!arguments.length)return l.count;if(e=Number(e),e<1)throw new Error("Bin count must be a positive integer");return e!==l.count&&(l.count=Math.floor(e),n(),r()),a},a.bins=function(){return c},a.itemCount=function(){return s},a.clearBin=function(e){if(e>=0&&e<c.length){var t=o.countBin(c[e]);return s-=t,c[e][1]=o.createSeed(),t}return 0},a(e),a}function s(e){function t(){var e=Date.now()+2*a.size();e=Math.floor(e/a.size())*a.size();var t=e-a.size()*a.count();return t}function n(){l===!0&&(a.lwm(t()),window.setTimeout(n,a.size()))}function r(){l||(l=!0,n())}function u(){l=!1}function i(e){if(null==e||null==e.binCount||null==e.binSize)throw new Error("You must provide an initial binSize and binCount");o.binSize=Number(e.binSize),o.binCount=Number(e.binCount),null!=e.delay&&(o.delay=Number(e.delay)),a=c({size:o.binSize,count:o.binCount+2,lwm:0}),a.lwm(t()),r()}var a,l,o={delay:0,binSize:0,binCount:0};return i.model=function(){return a},i.bins=function(){return a.bins()},i.start=function(){return r(),i},i.stop=function(){return u(),i},i.running=function(){return l},i.add=function(e){return a.add(e),i},i.clear=function(){return a.clear(),i},i.binSize=function(e){if(!arguments.length)return o.binSize;if(e=Number(e),e<1)throw new Error("Bin size must be a positive integer");return o.binSize=e,a.size(e),a.lwm(t()),i},i.binCount=function(e){if(!arguments.length)return o.binCount;if(e=Number(e),e<1)throw new Error("Bin count must be a positive integer");return o.binCount=e,a.count(e+2),a.lwm(t()),i},i(e),i}var f={donut:t,matrix:u,realtimeTimeline:l,timeline:a,verticalBars:o},d={realtimeBins:s,timelineBrush:i},g={bins:c,extent:n,multiExtent:r};e.chart=f,e.controller=d,e.model=g,Object.defineProperty(e,"__esModule",{value:!0})});